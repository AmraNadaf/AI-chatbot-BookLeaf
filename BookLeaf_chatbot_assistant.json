{
  "name": "My workflow 4",
  "nodes": [
    {
      "parameters": {},
      "id": "ab4b7ee6-bd2f-4c6c-92be-7a7c0ed7eb33",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        304,
        0
      ]
    },
    {
      "parameters": {
        "jsCode": "return [{test: 1}];"
      },
      "id": "49d1f1cb-f440-433f-9cc9-1763a30d590d",
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        528,
        0
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        560
      ],
      "id": "26ca3a81-df2b-481e-bbcb-135575dd632b",
      "name": "When chat message received",
      "webhookId": "b97745fd-523e-4f6c-869d-369fce5aba87"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        208,
        560
      ],
      "id": "eb195336-7314-483a-b1fb-f88c8b586cc6",
      "name": "AI Agent"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        224,
        768
      ],
      "id": "6eb516ea-39c2-492c-a7a0-b5f11fbd380c",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "GQjY7QAUEk0ikw46",
          "name": "Postgres Chat Memory"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "This database contains all useful information about publishers or users information regarding their publication which for example their email address, title of the book they have published, at what time si their book going live what add-ons, teir IPBN they have and etc.",
        "tableName": {
          "__rl": true,
          "value": "user_data",
          "mode": "list",
          "cachedResultName": "user_data"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        400,
        752
      ],
      "id": "3ae26feb-c201-41f5-b903-987735aa1b3b",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "EGp2uvsPUIeasxfX",
          "name": "Supabase Vector Store"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsHuggingFaceInference",
      "typeVersion": 1,
      "position": [
        448,
        1008
      ],
      "id": "22907292-7e62-43b2-bfc2-1772d4fe569b",
      "name": "Embeddings HuggingFace Inference",
      "credentials": {
        "huggingFaceApi": {
          "id": "GtRtJ3bWzFql2BRb",
          "name": "HuggingFaceApi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "You are a Book Leaf chat bot assistant.\nThis data contains a knowledge base of all the questions related and required by Book Leaf. You will retrieve data from this database each time a question is asked. You are not supposed to answer on your own always take support of this database.",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        704,
        704
      ],
      "id": "0ca84627-dc20-4a40-86c5-017e9375e02d",
      "name": "Supabase Vector Store1",
      "credentials": {
        "supabaseApi": {
          "id": "EGp2uvsPUIeasxfX",
          "name": "Supabase Vector Store"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsHuggingFaceInference",
      "typeVersion": 1,
      "position": [
        752,
        912
      ],
      "id": "ad1df6db-3c1b-4d25-acd8-70d8f96f2e36",
      "name": "Embeddings HuggingFace Inference1",
      "credentials": {
        "huggingFaceApi": {
          "id": "GtRtJ3bWzFql2BRb",
          "name": "HuggingFaceApi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        1232,
        1200
      ],
      "id": "e6ab7384-64c5-4fe4-aab7-1254c271cee7",
      "name": "Supabase Vector Store2",
      "credentials": {
        "supabaseApi": {
          "id": "EGp2uvsPUIeasxfX",
          "name": "Supabase Vector Store"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsHuggingFaceInference",
      "typeVersion": 1,
      "position": [
        1168,
        1408
      ],
      "id": "812aaf4d-60d1-4156-9bd2-280257d502c1",
      "name": "Embeddings HuggingFace Inference2",
      "credentials": {
        "huggingFaceApi": {
          "id": "GtRtJ3bWzFql2BRb",
          "name": "HuggingFaceApi account"
        }
      }
    },
    {
      "parameters": {
        "textSplittingMode": "custom",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        1376,
        1408
      ],
      "id": "d01d7aaf-875a-4eba-aaa3-c7fc4d8cfaf5",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1472,
        1616
      ],
      "id": "17e60f64-6bab-4387-96a1-a849fedf0079",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1gHLESxlXtC73qv-sL0JsJ5zGbunrnPHp",
          "mode": "list",
          "cachedResultName": "writting_challange.docx",
          "cachedResultUrl": "https://docs.google.com/document/d/1gHLESxlXtC73qv-sL0JsJ5zGbunrnPHp/edit?usp=drivesdk&ouid=107434791924530516668&rtpof=true&sd=true"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1024,
        1200
      ],
      "id": "b71fb33d-84af-4d9a-99bf-6db9effa6f4a",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "9Xn0B9ctFVjeybW6",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "model": "llama-3.1-8b-instant",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        80,
        768
      ],
      "id": "8606ef8d-aa20-4c0a-b7f5-ec841a6e9923",
      "name": "Groq Chat Model",
      "credentials": {
        "groqApi": {
          "id": "w6JYpHqfu1SINGja",
          "name": "Groq account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "Reconstructed workflow\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        560
      ],
      "typeVersion": 1,
      "id": "23d5b076-0cc7-4d23-8c94-d7fbcd8adbe8",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "Text workflow for solving JSON corrupt file problem\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        176,
        -32
      ],
      "typeVersion": 1,
      "id": "7541c8a5-9b54-4dc3-b3f6-5327cc00d223",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "Flow for adding dpcumentation to the supabase database\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        880,
        1152
      ],
      "typeVersion": 1,
      "id": "1b06b672-d92a-4845-bb20-4708b1ba1b33",
      "name": "Sticky Note2"
    }
  ],
  "pinData": {},
  "connections": {
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings HuggingFace Inference": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings HuggingFace Inference1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings HuggingFace Inference2": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store2",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Supabase Vector Store2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Groq Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "Unt8O85htYmynuk8"
  },
  "versionId": "17dbb1d2-2b9b-4e18-9a8e-4d1864cc05d6",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a80e79953156c167ed69035896d54eba7be3bc65f537e2668500b6439839bb45"
  },
  "id": "zSWx5qZjbxy2Q1zb",
  "tags": []
}